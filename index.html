<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æé‡‘å®¹çš„å¤„ç½šå®¤</title>
    <style>
        /* --- 1. å­—ä½“ä¸å…¨å±€ --- */
        @import url('https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap'); /* å¼•å…¥ä¸€ä¸ªå¯çˆ±çš„å¿«ä¹ä½“ */

        :root {
            --header-bg: #E0AAFF; /* é¡¶éƒ¨æ·¡ç´«è‰² */
            --score-bg: #C77DFF;  /* è®¡åˆ†æ·±ç´«è‰² */
            --btn-bg: #E0AAFF;    /* æŒ‰é’®ç²‰ç´« */
            --bg-color: #FFF0F5;  /* èƒŒæ™¯ææ·¡ç²‰ */
            
            /* æ°”æ³¡é¢œè‰²æ±  */
            --bubble-blue: #A2D2FF;
            --bubble-pink: #FFAFCC;
            --bubble-yellow: #FDE2E4;
            --bubble-green: #CDB4DB;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        body {
            font-family: 'ZCOOL KuaiLe', 'YouYuan', 'å¹¼åœ†', sans-serif; /* ä¼˜å…ˆä½¿ç”¨åœ†ä½“ */
            background-color: var(--bg-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: #fff;
        }

        /* --- 2. é¡¶éƒ¨é€šæ æ ‡é¢˜ (è¿˜åŸå‚è€ƒå›¾) --- */
        .header-bar {
            background: var(--header-bg);
            width: 100%;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(224, 170, 255, 0.4);
            z-index: 10;
        }

        .header-title {
            font-size: 1.8rem;
            letter-spacing: 5px; /* å­—é—´è·æ‹‰å¤§ */
            font-weight: normal;
            text-shadow: 2px 2px 0 rgba(255,255,255,0.3);
        }

        /* --- 3. è®¡åˆ†èƒ¶å›Š --- */
        .score-container {
            display: flex;
            justify-content: center;
            margin-top: -25px; /* ç¨å¾®å‘ä¸Šæ’å…¥æ ‡é¢˜æ æˆ–è€…è´´è¿‘ */
            margin-bottom: 20px;
            z-index: 11;
        }

        .score-pill {
            background: var(--score-bg);
            padding: 8px 30px;
            border-radius: 50px;
            font-size: 1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .count-num {
            font-size: 1.4rem;
            font-weight: bold;
            color: #FFF;
        }

        /* --- 4. æ ¸å¿ƒèˆå°åŒº (ä¸­é—´æ’ç”») --- */
        .stage-area {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            width: 100%;
            padding: 0 20px;
        }

        .characters-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 380px;
            position: relative;
        }

        /* å·¦å³è§’è‰²å›¾ */
        .char-img {
            width: 140px; /* æ ¹æ®å®é™…å›¾è°ƒæ•´ */
            height: 140px;
            object-fit: contain;
            transition: transform 0.1s;
        }

        /* è¢«æ‰“æ—¶çš„æŠ–åŠ¨ */
        .shake-vertical {
            animation: shakeVertical 0.2s ease-in-out;
        }
        @keyframes shakeVertical {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(0.95); }
        }

        /* ä¸­é—´çš„å·´æŒ/å·¥å…· (å‚è€ƒå›¾ä¸­é—´é‚£ä¸ª) */
        .weapon-box {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            z-index: 5;
            pointer-events: none;
            opacity: 0.6; /* é»˜è®¤åŠé€æ˜ */
            transition: opacity 0.2s;
        }
        
        .weapon-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transform-origin: bottom right; /* æ—‹è½¬ä¸­å¿ƒ */
        }

        /* å·´æŒæŒ¥åŠ¨åŠ¨ç”» */
        .slap-anim {
            animation: slapAction 0.15s ease-out;
        }
        @keyframes slapAction {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(-45deg) scale(1.5); } /* å‘å·¦æŒ¥åŠ¨ */
            100% { transform: rotate(0deg) scale(1); }
        }

        /* --- 5. å¤§æŒ‰é’® --- */
        .control-area {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            z-index: 20;
        }

        .hit-btn {
            background: var(--btn-bg);
            color: white;
            border: none;
            width: 220px;
            height: 70px;
            border-radius: 20px;
            font-size: 1.8rem;
            font-family: inherit;
            letter-spacing: 4px;
            box-shadow: 0 6px 0 #C77DFF, 0 10px 10px rgba(0,0,0,0.1); /* 3Dåšåº¦ */
            transition: all 0.1s;
            cursor: pointer;
        }

        .hit-btn:active {
            transform: translateY(6px);
            box-shadow: 0 0 0 #C77DFF, 0 2px 2px rgba(0,0,0,0.1);
        }

        /* --- 6. åº•éƒ¨å½©è‰²æ°”æ³¡åŒº (è¿˜åŸå‚è€ƒå›¾) --- */
        .bubbles-area {
            height: 25vh; /* å æ®åº•éƒ¨ 1/4 å±å¹• */
            position: relative;
            overflow: hidden;
            background: linear-gradient(to top, rgba(255,255,255,0.6) 0%, rgba(255,255,255,0) 100%);
        }

        /* æ°”æ³¡æ ·å¼ */
        .bubble-pill {
            position: absolute;
            padding: 8px 20px;
            border-radius: 30px;
            color: #fff;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            white-space: nowrap;
            opacity: 0;
            animation: floatUp 3s ease-out forwards;
        }

        /* å‡ ç§ä¸åŒçš„æ°”æ³¡é¢œè‰²ç±» */
        .b-blue { background: #A2D2FF; } /* æ°”æ­»è€å¨˜äº† */
        .b-pink { background: #FF9A9E; } /* å‘œå‘œå‘œ */
        .b-yellow { background: #FFC8DD; } /* å†ä¹Ÿä¸æ•¢äº† */
        .b-green { background: #BDE0FE; } /* è¿˜èƒ½å’‹åœ° */

        @keyframes floatUp {
            0% { opacity: 0; transform: translateY(100px) scale(0.5) rotate(0deg); }
            10% { opacity: 1; transform: translateY(0) scale(1.1) rotate(5deg); }
            100% { opacity: 0; transform: translateY(-150px) scale(1) rotate(-5deg); }
        }

        /* é¢„åŠ è½½ */
        #preload { display: none; }
    </style>
</head>
<body>

    <div class="header-bar">
        <div class="header-title">æ é‡‘ å®¹ çš„ å¤„ ç½š å®¤</div>
    </div>

    <div class="score-container">
        <div class="score-pill">
            ä»Šæ—¥å…±æƒ©ç½šæé‡‘å®¹: <span class="count-num" id="count">0</span> æ¬¡
        </div>
    </div>

    <div class="stage-area">
        <div class="characters-wrapper">
            <img id="charLeft" class="char-img" src="" alt="Target">
            
            <div class="weapon-box">
                <div id="weapon" class="weapon-img" style="font-size: 50px; text-align:center;">ğŸ‘‹</div>
            </div>

            <img id="charRight" class="char-img" src="" alt="Face">
        </div>
    </div>

    <div class="control-area">
        <button class="hit-btn" id="btn">æ‰“ å± è‚¡</button>
    </div>

    <div class="bubbles-area" id="bubbleStage">
        </div>

    <div id="preload"></div>

    <script>
        // === é…ç½®ä¸­å¿ƒ ===
        const config = {
            // è¯·åœ¨æ­¤æ›¿æ¢æ‚¨çš„é€æ˜èƒŒæ™¯ PNG å›¾ç‰‡
            // å»ºè®®ï¼šLeftæ”¾å±è‚¡å›¾ï¼ŒRightæ”¾äººè„¸å›¾ï¼ŒMiddleæ”¾å·´æŒå›¾(å¦‚æœä¸æƒ³ç”¨emoji)
            images: {
                leftNormal: 'https://ethan200293-rgb.github.io/love/images/Snipaste_2025-12-05_00-03-28.png',
                leftHit:    'https://via.placeholder.com/200x200/FF9A9E/ffffff?text=Butt+Red!', // æ‰“çº¢çš„å±è‚¡
                
                rightNormal: 'https://via.placeholder.com/200x200/BDE0FE/ffffff?text=Face+Normal',
                rightHit:    'https://via.placeholder.com/200x200/A2D2FF/ffffff?text=Face+Cry',   // å“­è„¸
            },
            // æ°”æ³¡æ–‡æ¡ˆä¸é¢œè‰²ç±»å‹ (å¯¹åº”cssç±»: b-blue, b-pink, b-yellow, b-green)
            bubbles: [
                { text: "æ°”æ­»è€å¨˜äº†", type: "b-blue" },
                { text: "å†ä¹Ÿä¸æ•¢äº†", type: "b-yellow" },
                { text: "å‘œå‘œå‘œ", type: "b-pink" },
                { text: "ä¸‹æ¬¡è¿˜æ•¢ï¼", type: "b-green" },
                { text: "ç”¨åŠ›ç‚¹ï¼", type: "b-pink" },
                { text: "å±è‚¡å¼€èŠ±ğŸŒ¸", type: "b-yellow" },
                { text: "é”™äº†é”™äº†", type: "b-blue" }
            ]
        };

        // === é€»è¾‘ ===
        let count = 0;
        const countEl = document.getElementById('count');
        const btn = document.getElementById('btn');
        const charLeft = document.getElementById('charLeft');
        const charRight = document.getElementById('charRight');
        const weapon = document.getElementById('weapon');
        const bubbleStage = document.getElementById('bubbleStage');
        const preloadDiv = document.getElementById('preload');

        // åˆå§‹åŒ–
        function init() {
            charLeft.src = config.images.leftNormal;
            charRight.src = config.images.rightNormal;
            
            // é¢„åŠ è½½
            const i1 = new Image(); i1.src = config.images.leftHit;
            const i2 = new Image(); i2.src = config.images.rightHit;
            preloadDiv.append(i1, i2);
        }

        // ç‚¹å‡»åŠ¨ä½œ
        function smite() {
            // 1. è®¡æ•°
            count++;
            countEl.innerText = count;

            // 2. è§’è‰²å˜èº« & æŠ–åŠ¨
            charLeft.src = config.images.leftHit;
            charRight.src = config.images.rightHit;
            charLeft.classList.add('shake-vertical');
            charRight.classList.add('shake-vertical');

            // 3. æ­¦å™¨æŒ¥åŠ¨
            weapon.parentElement.style.opacity = '1'; // æ˜¾ç¤ºæ­¦å™¨
            weapon.classList.add('slap-anim');

            // 4. å®šæ—¶è¿˜åŸ
            setTimeout(() => {
                charLeft.src = config.images.leftNormal;
                charRight.src = config.images.rightNormal;
                charLeft.classList.remove('shake-vertical');
                charRight.classList.remove('shake-vertical');
                weapon.classList.remove('slap-anim');
                weapon.parentElement.style.opacity = '0.6'; // å˜æ·¡
            }, 150); // åŠ¨ä½œå¿«ä¸€ç‚¹ï¼Œæ›´æœ‰æ‰“å‡»æ„Ÿ

            // 5. ç”Ÿæˆæ°”æ³¡
            spawnBubble();
        }

        // ç”Ÿæˆåº•éƒ¨é£˜èµ·çš„å½©è‰²è¯ä¸¸æ°”æ³¡
        function spawnBubble() {
            const data = config.bubbles[Math.floor(Math.random() * config.bubbles.length)];
            const el = document.createElement('div');
            el.className = `bubble-pill ${data.type}`;
            el.innerText = data.text;

            // éšæœºä½ç½® (0% - 80% å®½åº¦)
            const randomLeft = Math.floor(Math.random() * 80);
            el.style.left = randomLeft + '%';
            // éšæœºå¤§å°å¾®è°ƒ
            el.style.transform = `scale(${0.8 + Math.random() * 0.4})`;
            // éšæœºåº•å±‚èµ·å§‹ä½ç½® (è®©å®ƒä»¬çœ‹èµ·æ¥æœ‰å±‚æ¬¡)
            el.style.bottom = (Math.random() * 50 - 50) + 'px';

            bubbleStage.appendChild(el);

            // åŠ¨ç”»ç»“æŸåç§»é™¤
            setTimeout(() => {
                el.remove();
            }, 3000);
        }

        // ç»‘å®šäº‹ä»¶ (æ”¯æŒç‚¹å‡»å’Œè§¦æ‘¸)
        btn.addEventListener('click', smite);
        btn.addEventListener('touchstart', (e) => { e.preventDefault(); smite(); });

        init();

    </script>
</body>
</html>
